---
import { blogData } from '../../data/blog';
import BlogCard from './BlogCard.astro';
import { getWhatsAppLink } from '../../lib/utils';

const { lang } = Astro.props;
const blog = blogData[lang] || blogData['en'];

// Get unique categories
const categories = [...new Set(blog.posts.map(post => post.category))];
const totalPosts = blog.posts.length;
---

<section id="blog" class="py-16 md:py-24 relative">
  <div class="container mx-auto px-4">
    {/* Hero Section - Minimalist */}
    <div class="mb-12 md:mb-16">
      <h1 class="text-5xl md:text-7xl font-bold mb-4 tracking-tight">{blog.title}</h1>
      <p class="text-lg md:text-xl text-muted-foreground max-w-2xl leading-relaxed">
        {blog.subtitle}
      </p>
    </div>

    {/* Categories Filter - Minimalist */}
    {categories.length > 0 && (
      <div class="mb-10 pb-6 border-b border-border/30">
        <div class="flex flex-wrap items-center gap-3">
          {categories.map(category => (
            <span class="text-sm text-muted-foreground hover:text-foreground transition-colors cursor-pointer">
              {category}
            </span>
          ))}
        </div>
      </div>
    )}

    {/* Blog Grid - Minimalist */}
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 lg:gap-10 mb-16">
      {blog.posts.map(post => (
        <BlogCard post={post} lang={lang} />
      ))}
    </div>

    {/* CTA Section - Minimalist */}
    <div class="pt-12 border-t border-border/30">
      <div class="text-center max-w-xl mx-auto">
        <h3 class="text-2xl md:text-3xl font-bold mb-4">
          {lang === 'en' ? 'Have a Project in Mind?' : 'Ada Proyek di Pikiran?'}
        </h3>
        <p class="text-muted-foreground mb-8 leading-relaxed">
          {lang === 'en' 
            ? 'Let\'s discuss how we can help bring your ideas to life.'
            : 'Mari diskusikan bagaimana kami dapat membantu mewujudkan ide Anda.'}
        </p>
        <div class="flex justify-center">
          <a 
            href={getWhatsAppLink('footer', lang)}
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center justify-center px-8 py-4 text-base font-bold text-white transition-all duration-200 bg-brand rounded-full hover:bg-brand/90 hover:shadow-lg hover:shadow-brand/20"
          >
            {lang === 'en' ? 'Get Started' : 'Mulai Sekarang'}
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

