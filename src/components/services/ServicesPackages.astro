---
import { getWhatsAppLink } from '../../lib/utils';
import { LottieIcon } from '../ui/LottieIcon';

const { lang } = Astro.props;

const content = {
  id: {
    eyebrow: "Paket Layanan",
    title: "Mulai dari yang Sederhana",
    titleHighlight: "Tumbuh Bersama Anda",
    subtitle: "Kami percaya setiap bisnis berhak punya software yang tepat — tidak peduli seberapa besar atau kecil. Mulai dari website sederhana hingga sistem enterprise yang kompleks.",
    packages: [
      {
        name: "Website Development",
        icon: "web",
        story: "Perkenalkan bisnis Anda ke dunia digital. Website yang cepat, modern, dan mudah dikelola.",
        features: [
          "Company profile yang profesional",
          "Landing page untuk campaign",
          "Marketing site dengan SEO optimal",
          "Fast loading & mobile responsive"
        ],
        ideal: "Startup, UMKM, atau bisnis yang baru mulai go digital"
      },
      {
        name: "Mobile App Development",
        icon: "mobile",
        story: "Bawa bisnis Anda ke genggaman customer. Aplikasi mobile yang smooth, reliable, dan user-friendly.",
        features: [
          "Cross-platform (iOS & Android)",
          "Custom UI/UX design",
          "Backend integration",
          "Push notifications & offline mode"
        ],
        ideal: "Bisnis yang butuh engagement langsung dengan customer"
      },
      {
        name: "Custom Software Development",
        icon: "custom",
        story: "Software yang dibuat khusus untuk workflow unik bisnis Anda. Dari sistem internal hingga tools operasional.",
        features: [
          "Tailored to your business process",
          "Internal systems & dashboards",
          "MVP development",
          "Custom integrations"
        ],
        ideal: "Bisnis yang berkembang dan butuh sistem khusus"
      }
    ],
    idealLabel: "Cocok untuk",
    cta: "Diskusikan Kebutuhan Anda"
  },
  en: {
    eyebrow: "Service Packages",
    title: "Start Simple",
    titleHighlight: "Grow Together",
    subtitle: "We believe every business deserves the right software — no matter how big or small. From simple websites to complex enterprise systems.",
    packages: [
      {
        name: "Website Development",
        icon: "web",
        story: "Introduce your business to the digital world. Fast, modern, and easy-to-manage websites.",
        features: [
          "Professional company profile",
          "Landing pages for campaigns",
          "SEO-optimized marketing sites",
          "Fast loading & mobile responsive"
        ],
        ideal: "Startups, SMEs, or businesses just starting to go digital"
      },
      {
        name: "Mobile App Development",
        icon: "mobile",
        story: "Bring your business to your customers' hands. Smooth, reliable, and user-friendly mobile applications.",
        features: [
          "Cross-platform (iOS & Android)",
          "Custom UI/UX design",
          "Backend integration",
          "Push notifications & offline mode"
        ],
        ideal: "Businesses that need direct customer engagement"
      },
      {
        name: "Custom Software Development",
        icon: "custom",
        story: "Software built specifically for your unique business workflow. From internal systems to operational tools.",
        features: [
          "Tailored to your business process",
          "Internal systems & dashboards",
          "MVP development",
          "Custom integrations"
        ],
        ideal: "Growing businesses that need custom systems"
      }
    ],
    idealLabel: "Perfect for",
    cta: "Discuss Your Needs"
  }
};

const t = content[lang as keyof typeof content] as typeof content.en;

const iconPaths: Record<string, string> = {
  web: '/icon/web-developer.gif',
  mobile: '/icon/mobile.gif',
  custom: '/icon/system.gif',
};
---

<section class="py-24 md:py-32 lg:py-40 relative bg-muted/30">
  <!-- Section divider with glow -->
  <div class="absolute top-0 left-0 right-0 h-px bg-linear-to-r from-transparent via-border to-transparent"></div>
  <div class="absolute top-0 left-0 right-0 h-0.5 bg-linear-to-r from-transparent via-brand/20 to-transparent blur-sm"></div>
  
  <div class="container mx-auto px-4">
    <!-- Section Header -->
    <div class="max-w-4xl mb-16 md:mb-24">
      <span class="inline-block text-brand text-sm font-medium uppercase tracking-[0.2em] mb-4">
        {t.eyebrow}
      </span>
      <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight text-foreground mb-6 leading-[1.1]">
        {t.title}, <br class="hidden md:block" />
        <span class="text-brand">{t.titleHighlight}</span>
      </h2>
      <p class="text-lg md:text-xl text-muted-foreground leading-relaxed max-w-2xl">
        {t.subtitle}
      </p>
    </div>

    <!-- Packages - Stacked Cards with Visual Storytelling -->
    <div class="space-y-8 md:space-y-12">
      {t.packages.map((pkg: typeof t.packages[0], index: number) => {
        return (
          <article class="group relative bg-card border border-border/50 rounded-3xl overflow-hidden shadow-xl shadow-foreground/10 hover:border-brand/30 hover:shadow-2xl hover:shadow-brand/15 hover:-translate-y-2 transition-all duration-500">
            <div class="grid lg:grid-cols-2 gap-0">
              <!-- Left: Visual storytelling area -->
              <div class="relative p-8 md:p-12 lg:p-16 bg-linear-to-br from-muted/50 to-transparent">  
                <!-- Subtle inner glow -->
                <div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_30%,rgba(59,130,246,0.08),transparent_70%)]"></div>
                <!-- Large number -->
                <div class="absolute top-8 left-8 md:top-12 md:left-12">
                  <span class="text-8xl md:text-9xl font-bold text-foreground/[0.03] group-hover:text-brand/10 transition-colors duration-500">
                    0{index + 1}
                  </span>
                </div>
                
                <!-- Icon -->
                <div class="relative z-10 mb-8 mt-16 md:mt-20">
                  <LottieIcon 
                    src={iconPaths[pkg.icon]} 
                    className="w-24 h-24 md:w-28 md:h-28"
                    client:only="react"
                  />
                </div>
                
                <!-- Title & Story -->
                <div class="relative z-10">
                  <h3 class="text-2xl md:text-3xl lg:text-4xl font-bold text-foreground mb-4 leading-tight">
                    {pkg.name}
                  </h3>
                  <p class="text-lg md:text-xl text-muted-foreground leading-relaxed">
                    {pkg.story}
                  </p>
                </div>
              </div>

              <!-- Right: Features & CTA -->
              <div class="p-8 md:p-12 lg:p-16 flex flex-col justify-between">
                <!-- Features -->
                <ul class="space-y-4 mb-8">
                  {pkg.features.map((feature: string) => (
                    <li class="flex items-start gap-4">
                      <div class="w-6 h-6 rounded-full bg-brand/10 flex items-center justify-center shrink-0 mt-0.5 shadow-md shadow-brand/20">
                        <svg class="w-3.5 h-3.5 text-brand" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                        </svg>
                      </div>
                      <span class="text-foreground/90 leading-relaxed">{feature}</span>
                    </li>
                  ))}
                </ul>

                <!-- Ideal For -->
                <div class="pt-6 border-t border-border/50">
                  <p class="text-sm text-muted-foreground mb-1">{t.idealLabel}:</p>
                  <p class="text-foreground font-medium mb-6">{pkg.ideal}</p>
                  
                  <!-- CTA -->
                  <a
                    href={getWhatsAppLink('services', lang)}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center gap-3 px-6 py-3 bg-foreground text-background rounded-full font-medium hover:bg-brand hover:shadow-xl hover:shadow-brand/30 transition-all duration-300 group/btn"
                  >
                    <span>{t.cta}</span>
                    <div class="w-6 h-6 rounded-full bg-background/10 flex items-center justify-center">
                      <svg class="w-3 h-3 group-hover/btn:translate-x-0.5 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                      </svg>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </article>
        );
      })}
    </div>
  </div>
</section>
